\subsection{Pruning}\label{sec:pruning}

Some of the semantics from \cref{subsec:semantics} can lead to TA of an explosive size.
An optional pruning step is performed on the automaton, in order to remove transitions, states,
and clocks, that do not affect the transition system.
This leads to better performance (see \cref{subsec:benchmarks}), and better readability. 
%TODO: Affirm claims made about performance after benchmarks

Throughout this section the TA seen on \cref{fig:prune0} will be used as an example of how the prunings work.
The TA is equivalent to the TReg following TReg, although a few states have been pruned already to make it fit on the page.
$$C(A[5;10]\&(BA|A)[1;3])$$

\input{Automata/Prune0.tex}

\subsubsection{Clock Reduction}\label[subsubsection]{clockReduction}
The amount of clocks in the automaton can be reduced after generation of the TA.
A paper by Daws et al. describes these methods \cite{Daws1996}.
Therefore we wont go into detail about it in this paper.
We will use $\clockreduction\automaton$ as a function reducing the clocks of automaton $\automaton$.

In the automaton in \cref{fig:prune0} both clock $c_0$ and $c_1$ can be combined into one clock since they are reset at the same time.
The result of this operation can be seen in \cref{fig:prune1}.

\input{Automata/Prune1.tex}

\subsubsection{Dead Transition Pruning}\label[subsubsection]{deadTransitionPruning}
Edges that are overconstrained on one or more clocks, are considered "dead" edges, and can be removed without changing the language of the automaton.
Since these edges could never be taken by any transition system, it does not change the language to remove them.
Dead edge pruning is formally defined in \cref{definition:deadEdgePruning}.

\input{Documents/Definitions/PruneSemantics/DeadEdge.tex}

In the automaton \cref{fig:prune1} we can see that after merging the two clocks, the clock intervals on $q3\rightarrow q2$ and $q4\rightarrow q2$ can be simplified to false:
$$c_1\in[5;10]\wedge c_1\in[1;3]=false$$
A clock can not have a value bigger than 5 and smaller than 3 at the same time.
Since the edge can now no longer be taken, it can easily be removed.
The result of this operation can be seen in \cref{fig:prune2}.

\input{Automata/Prune2.tex}

\subsubsection{Unreachable State Pruning}\label[subsubsection]{unreachableStatePruning}
States that are not the destination of any transition or the initial state, are considered "unreachable" states, and can be removed without changing the language of the automaton.
Since these states could never be reached, they were not part of the transition system for any words recognized by the automaton, hence it does not change the language to remove them.
Unreachable state pruning is formally defined in \cref{definition:unreachableStatePruning}

\input{Documents/Definitions/PruneSemantics/Unreachable.tex}

In the automaton in \cref{fig:prune2} $q4$ and $q2$ can be removed since they are neither the destination of any transition, nor the initial state.
This means there is no way to enter $q4$ or $q2$, and they can be removed.
The result of this operation can be seen in \cref{fig:prune3}.

\input{Automata/Prune3.tex}

\subsubsection{Dead State Pruning}\label[subsubsection]{deadStatePruning}
States that are not final states, or the source of any transition,
are considered "dead" states, and can be removed without changing the language of the automaton.
Since these states can not reach final states, they were not part of the transition system for any words recognized by the automaton, hence it does not change the language to remove them.
Dead state pruning is formally defined in \cref{definition:deadStatePruning}.

\input{Documents/Definitions/PruneSemantics/DeadState.tex}

In the automaton in \cref{fig:prune3} $q7$ can be removed since it is neither the source of any transition, nor a final state.
This means there is no way to reach a final state from $q7$, and it can be removed.
The result of this operation can be seen in \cref{fig:prune4}.

\input{Automata/Prune4.tex}

\subsubsection{Dead Clock Pruning}\label[subsubsection]{deadClockPruning}
Clocks that are never used in ranges to constrain any edges are considered "dead", and can be removed without changing the language of the automaton.
Since these clocks never constrain any transitions, it does not change the possible ways to reach final states, hence it does not change the language to remove them.
This rule is formally defined in \cref{definition:deadClockPruning}

\input{Documents/Definitions/PruneSemantics/DeadClock.tex}

In the automaton in \cref{fig:prune4}
We can see that clock $c_0$ is not being used.
This clock is however reset on the transition $q0\rightarrow q3$.
This means we can remove the clock, since it does not effect the ability to take any edges.
The result of this operation can be seen in \cref{fig:prune5}

\input{Automata/Prune5.tex}

\subsubsection{Recursive pruning}
All the prunings described in this section need to happen recursively to get rid of everything.
The recursion stops when no changes have been made to the automaton.
This recursion is formally defined in \cref{definition:recursivePruning}

\input{Documents/Definitions/PruneSemantics/RecursivePruning.tex}

In the automaton in \cref{fig:prune5}, there are still things left to be pruned.
The state $q3$ is a dead state and can therefore be removed.
The recursion will take of that and turn the automaton into the one in \cref{fig:prune6}.

\input{Automata/Prune6.tex}